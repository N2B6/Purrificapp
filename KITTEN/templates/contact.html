{% extends 'base.html' %}
{% block content %}
{% load static %}

<style>
/* Dynamic Background */
body {
    background: linear-gradient(-45deg, #ee7752, #e73c7e, #23a6d5, #23d5ab);
    background-size: 400% 400%;
    animation: gradientBG 15s ease infinite;
    min-height: 100vh;
    background-attachment: fixed;
}

@keyframes gradientBG {
    0% { background-position: 0% 50%; }
    50% { background-position: 100% 50%; }
    100% { background-position: 0% 50%; }
}

/* Modern Card Styling */
.bg-light {
    background: rgba(255, 255, 255, 0.85) !important;
    backdrop-filter: blur(10px);
    border: none;
    box-shadow: 0 15px 35px rgba(0, 0, 0, 0.2);
    transition: transform 0.3s ease, box-shadow 0.3s ease;
}

.bg-light:hover {
    transform: translateY(-5px);
    box-shadow: 0 20px 40px rgba(0, 0, 0, 0.3);
}

/* Input Field Styling */
.form-floating input,
.form-floating textarea {
    background: rgba(255, 255, 255, 0.9);
    border: 2px solid transparent;
    transition: all 0.3s ease;
    border-radius: 8px;
}

.form-floating input:focus,
.form-floating textarea:focus {
    transform: scale(1.02);
    border-color: #23a6d5;
    box-shadow: 0 5px 15px rgba(35, 166, 213, 0.2);
}

/* Button Styling */
.btn-primary {
    background: linear-gradient(45deg, #23a6d5, #23d5ab);
    border: none;
    padding: 12px 30px;
    font-weight: 600;
    letter-spacing: 1px;
    position: relative;
    overflow: hidden;
    transition: all 0.3s ease;
}

.btn-primary:hover {
    transform: translateY(-2px);
    box-shadow: 0 5px 15px rgba(35, 166, 213, 0.4);
}

.btn-primary::after {
    content: '';
    position: absolute;
    top: 0;
    left: -100%;
    width: 100%;
    height: 100%;
    background: linear-gradient(90deg, transparent, rgba(255,255,255,0.2), transparent);
    transition: 0.5s;
}

.btn-primary:hover::after {
    left: 100%;
}

/* Enhanced Icon Styling */
.feature {
    width: 80px;
    height: 80px;
    margin: 0 auto;
    background: linear-gradient(-45deg, #ee7752, #e73c7e, #23a6d5, #23d5ab);
    background-size: 300% 300%;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 32px;
    position: relative;
    overflow: hidden;
    animation: gradientBG 5s ease infinite, pulseIcon 2s infinite;
    box-shadow: 0 10px 20px rgba(0, 0, 0, 0.2);
}

.feature i {
    color: white;
    position: relative;
    z-index: 2;
    animation: bounce 2s infinite;
}

.feature::after {
    content: '';
    position: absolute;
    width: 100%;
    height: 100%;
    background: rgba(255, 255, 255, 0.2);
    transform: rotate(45deg);
    left: -100%;
    transition: 0.5s;
}

.feature:hover::after {
    left: 100%;
}

.feature:hover i {
    animation: shake 0.5s ease-in-out;
}

@keyframes bounce {
    0%, 20%, 50%, 80%, 100% {
        transform: translateY(0);
    }
    40% {
        transform: translateY(-10px);
    }
    60% {
        transform: translateY(-5px);
    }
}

@keyframes shake {
    0%, 100% { transform: rotate(0deg); }
    25% { transform: rotate(-10deg); }
    75% { transform: rotate(10deg); }
}

/* Glowing effect for the icon */
.feature::before {
    content: '';
    position: absolute;
    width: 100%;
    height: 100%;
    background: inherit;
    filter: blur(10px);
    opacity: 0.7;
    z-index: -1;
    animation: glowPulse 2s infinite;
}

@keyframes glowPulse {
    0% { transform: scale(1); opacity: 0.7; }
    50% { transform: scale(1.2); opacity: 0.5; }
    100% { transform: scale(1); opacity: 0.7; }
}

/* Update the icon in your HTML */
.feature i.bi-envelope {
    animation: letterFloat 3s ease-in-out infinite;
}

@keyframes letterFloat {
    0% { transform: translateY(0) rotate(0); }
    25% { transform: translateY(-5px) rotate(-5deg); }
    75% { transform: translateY(5px) rotate(5deg); }
    100% { transform: translateY(0) rotate(0); }
}

/* Success Message Animation */
.alert-success {
    animation: slideDown 0.5s ease-out;
    background: rgba(40, 167, 69, 0.9);
    backdrop-filter: blur(10px);
    border: none;
    color: white;
}

@keyframes slideDown {
    from { transform: translateY(-20px); opacity: 0; }
    to { transform: translateY(0); opacity: 1; }
}

/* Character Counter */
.char-counter {
    font-size: 0.8rem;
    color: #666;
    text-align: right;
    margin-top: 5px;
    transition: all 0.3s ease;
}

.char-counter.warning { color: #ffc107; }
.char-counter.danger { color: #dc3545; }

/* Loading Animation */
.spinner {
    display: inline-block;
    position: relative;
    width: 80px;
    height: 20px;
}

.spinner-inner {
    position: absolute;
    width: 16px;
    height: 16px;
    border-radius: 50%;
    background: #fff;
    animation: spinner 1.2s linear infinite;
}

@keyframes spinner {
    0%, 20%, 80%, 100% { transform: scale(1); }
    50% { transform: scale(1.5); }
}
</style>

<!-- Page content -->
<section class="py-5">
    <div class="container px-5">
        <!-- Contact form -->
        <div class="bg-light rounded-4 py-5 px-4 px-md-5 mb-5">
            <div class="text-center mb-5">
                <div class="feature mb-3">
                    <i class="bi bi-envelope"></i>
                </div>
                <h1 class="fw-bolder animate__animated animate__fadeIn">Get in Touch</h1>
                <p class="lead fw-normal text-muted mb-0 animate__animated animate__fadeIn animate__delay-1s">We'd love to hear from you</p>
            </div>
            <div class="row gx-5 justify-content-center">
                <div class="col-lg-8 col-xl-6">
                    <!-- Contact Form -->
                    <form id="contactForm" method="POST" action="{% url 'Contact' %}">
                        {% csrf_token %}
                        <!-- Display success messages -->
                        {% if messages %}
                            <div class="alert alert-success" role="alert">
                                {% for message in messages %}
                                    {{ message }}
                                {% endfor %}
                            </div>
                        {% endif %}
                        <!-- Name input -->
                        <div class="form-floating mb-3">
                            <input class="form-control" id="name" type="text" placeholder="Enter your name..." name="name" required />
                            <label for="name">Full name</label>
                            <div class="invalid-feedback">A name is required.</div>
                        </div>
                        <!-- Email address input -->
                        <div class="form-floating mb-3">
                            <input class="form-control" id="email" type="email" placeholder="name@example.com" name="email" required />
                            <label for="email">Email address</label>
                            <div class="invalid-feedback">An email is required.</div>
                        </div>
                        <!-- Phone number input -->
                        <div class="form-floating mb-3">
                            <input class="form-control" id="phone" type="tel" placeholder="(123) 456-7890" name="phone" required />
                            <label for="phone">Phone number</label>
                            <div class="invalid-feedback">A phone number is required.</div>
                        </div>
                        <!-- Message input -->
                        <div class="form-floating mb-3">
                            <textarea class="form-control" id="message" type="text" placeholder="Enter your message here..." style="height: 10rem" name="message" required></textarea>
                            <label for="message">Tell us about your lifestyle, living situation, and experience with pets.</label>
                            <div class="invalid-feedback">A message is required.</div>
                        </div>
                        <!-- Submit Button -->
                        <div class="d-grid">
                            <button class="btn btn-primary btn-lg" type="submit">Submit</button>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>
</section>
<!-- Footer -->
<footer class="bg-dark py-4 mt-auto">
    <div class="container px-5">
        <div class="row align-items-center justify-content-between flex-column flex-sm-row">
            <div class="col-auto"><div class="small m-0 text-white">Copyright &copy; Purrific 2024</div></div>
            <div class="col-auto">
                <a class="link-light small" href="{% url 'Terms' %}">Terms</a>
                <span class="text-white mx-1">&middot;</span>
                <a class="link-light small" href="{% url 'Contact'%}">Contact</a>
            </div>
        </div>
    </div>
</footer>
<!-- Bootstrap core JS -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js"></script>
<!-- Core theme JS -->
<script src="https://23202513s3.s3.eu-west-1.amazonaws.com/KITTEN/static/js/scripts.js"></script>
<!-- SB Forms JS -->
<script src="https://cdn.startbootstrap.com/sb-forms-latest.js"></script>

<!-- Add this before the closing </body> tag -->
<script>
document.addEventListener('DOMContentLoaded', function() {
    const form = document.getElementById('contactForm');
    const inputs = form.querySelectorAll('input, textarea');
    
    // Add character counter for message
    const messageArea = document.getElementById('message');
    const counterDiv = document.createElement('div');
    counterDiv.className = 'char-counter';
    messageArea.parentNode.appendChild(counterDiv);
    
    const maxLength = 500;
    messageArea.setAttribute('maxlength', maxLength);
    
    messageArea.addEventListener('input', function() {
        const remaining = maxLength - this.value.length;
        counterDiv.textContent = `${remaining} characters remaining`;
        
        if (remaining < 50) {
            counterDiv.className = 'char-counter danger';
        } else if (remaining < 100) {
            counterDiv.className = 'char-counter warning';
        } else {
            counterDiv.className = 'char-counter';
        }
    });
    
    // Add floating animation for inputs
    inputs.forEach(input => {
        input.addEventListener('focus', function() {
            this.parentElement.classList.add('focused');
        });
        
        input.addEventListener('blur', function() {
            if (!this.value) {
                this.parentElement.classList.remove('focused');
            }
        });
    });
    
    // Form submission handling
    form.addEventListener('submit', async function(e) {
        e.preventDefault();
        
        const submitBtn = form.querySelector('button[type="submit"]');
        submitBtn.disabled = true;
        submitBtn.innerHTML = '<div class="spinner"><span class="spinner-inner"></span></div> Sending...';
        
        try {
            const formData = new FormData(form);
            const response = await fetch(form.action, {
                method: 'POST',
                body: formData,
                headers: {
                    'X-CSRFToken': document.querySelector('[name=csrfmiddlewaretoken]').value
                }
            });
            
            if (response.ok) {
                showSuccess();
                form.reset();
            } else {
                showError();
            }
        } catch (error) {
            showError();
        } finally {
            submitBtn.disabled = false;
            submitBtn.innerHTML = 'Submit';
        }
    });
    
    function showSuccess() {
        const alert = document.createElement('div');
        alert.className = 'alert alert-success';
        alert.innerHTML = 'Thank you! Your message has been sent successfully.';
        form.insertBefore(alert, form.firstChild);
        setTimeout(() => alert.remove(), 5000);
    }
    
    function showError() {
        const alert = document.createElement('div');
        alert.className = 'alert alert-danger';
        alert.innerHTML = 'Oops! Something went wrong. Please try again.';
        form.insertBefore(alert, form.firstChild);
        setTimeout(() => alert.remove(), 5000);
    }
});
</script>
</body>
</html>
{% endblock %}
